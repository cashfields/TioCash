% Plane partition
% Author: Jang Soo Kim
\documentclass{article}

\usepackage{graphicx,amssymb,fp}
\newsavebox\foobox
\newcommand\slbox[2]{%
	\FPdiv{\result}{#1}{57.296}% CONVERT deg TO rad
	\FPtan{\result}{\result}%
	\slantbox[\result]{#2}%
}%
\newcommand{\slantbox}[2][30]{%
	\mbox{%
		\sbox{\foobox}{#2}%
		\hskip\wd\foobox
		\pdfsave
		\pdfsetmatrix{1 0 #1 1}%
		\llap{\usebox{\foobox}}%
		\pdfrestore
}}
\newcommand\rotslant[3]{\rotatebox{#1}{\slbox{#2}{#3}}}

\usepackage{tikz}
% Three counters
\newcounter{x}
\newcounter{y}
\newcounter{z}

% The angles of x,y,z-axes
\newcommand\xaxis{210}
\newcommand\yaxis{-30}
\newcommand\zaxis{90}

% The top side of a cube
\newcommand\topside[3]{
	\fill[fill=yellow, draw=black,shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] (0,0) -- (30:1) -- (0,1) --(150:1)--(0,0);
	\node[shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] at (-.1,.6,.5) {\rotslant{-30}{30}{\the\numexpr1+\value{z}}};
	\node[shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] at (.5,.6,.5) {\rotslant{30}{-30}{\the\numexpr1+\value{z}}};
}

% The left side of a cube
\newcommand\leftside[3]{
	\fill[fill=red, draw=black,shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] (0,0) -- (0,-1) -- (210:1) --(150:1)--(0,0);
	\node[shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] at (-.6,-.5,-.5) {\rotslant{-30}{-30}{\the\numexpr1+\value{x}}};
}

% The right side of a cube
\newcommand\rightside[3]{
	\fill[fill=blue, draw=black,shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] (0,0) -- (30:1) -- (-30:1) --(0,-1)--(0,0);
	\node[shift={(\xaxis:#1)},shift={(\yaxis:#2)},
	shift={(\zaxis:#3)}] at (.2,-.5,-.5) {\rotslant{30}{30}{\the\numexpr1+\value{y}}};
}

% The cube 
\newcommand\cube[3]{
	\topside{#1}{#2}{#3} \leftside{#1}{#2}{#3} \rightside{#1}{#2}{#3}
}

% Definition of \planepartition
% To draw the following plane partition, just write \planepartition{ {a, b, c}, {d,e} }.
%  a b c
%  d e
\newcommand\planepartition[1]{
	\setcounter{x}{-1}
	\foreach \a in {#1} {
		\addtocounter{x}{1}
		\setcounter{y}{-1}
		\foreach \b in \a {
			\addtocounter{y}{1}
			\setcounter{z}{-1}
			\foreach \c in {1,...,\b} {
				\addtocounter{z}{1}
				\cube{\value{x}}{\value{y}}{\value{z}}
			}
		}
	}
}
\begin{document} 
	\begin{tikzpicture}
	\planepartition{{5,3,2,2},{4,2,2,1},{2,1},{1}}
	\end{tikzpicture}
	
	$+30^\circ$ rotate;$+30^\circ$ slant:
	\rotslant{30}{30}{$\square$A}
	
	$-30^\circ$ rotate;$-30^\circ$ slant:
	\rotslant{-30}{-30}{$\square$A}
	
	$-30^\circ$ rotate;$+30^\circ$ slant:
	\rotslant{-30}{30}{$\square$A}
	
	$+30^\circ$ rotate;$-30^\circ$ slant:
	\rotslant{30}{-30}{$\square$A}
\end{document} 